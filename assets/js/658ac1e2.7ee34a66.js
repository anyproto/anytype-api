"use strict";(self.webpackChunkanytype_api=self.webpackChunkanytype_api||[]).push([[4636],{72086:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"examples/introductory/journal","title":"Daily Journal in Python","description":"Learn how to create a daily journal entry in Anytype using a simple Python script and the Anytype API.","source":"@site/docs/examples/introductory/journal.md","sourceDirName":"examples/introductory","slug":"/examples/introductory/journal","permalink":"/docs/examples/introductory/journal","draft":false,"unlisted":false,"editUrl":"https://github.com/anyproto/anytype-api/tree/main/docs/examples/introductory/journal.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Daily Journal in Python","description":"Learn how to create a daily journal entry in Anytype using a simple Python script and the Anytype API.","keywords":["anytype","api","python","journal","automation","script","developer","cookbook"]},"sidebar":"exampleSidebar","previous":{"title":"Anytype for Raycast","permalink":"/docs/examples/advanced/raycast"}}');var i=t(74848),a=t(28453);const o={sidebar_position:1,title:"Daily Journal in Python",description:"Learn how to create a daily journal entry in Anytype using a simple Python script and the Anytype API.",keywords:["anytype","api","python","journal","automation","script","developer","cookbook"]},r="Daily Journal in Python",c={},l=[{value:"Overview",id:"overview",level:2},{value:"Fetching Your Space ID",id:"fetching-your-space-id",level:2},{value:"Creating the Journal Entry Object",id:"creating-the-journal-entry-object",level:2},{value:"Running the Script",id:"running-the-script",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"daily-journal-in-python",children:"Daily Journal in Python"})}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:["In this cookbook example, we'll write a small ",(0,i.jsx)(n.strong,{children:"Python"})," script that uses the ",(0,i.jsx)(n.strong,{children:"Anytype API"})," to create a new daily journal entry in your Anytype workspace. We assume you have already obtained an ",(0,i.jsx)(n.strong,{children:"API key"})," (via the auth challenge flow) and that your Anytype app is running to accept API requests. Using this key, the script will connect to Anytype's local API, find your space, and create a new page object for today's journal entry."]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"What this script does:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Fetches your spaces:"})," Uses the Anytype API to retrieve the list of available spaces (workspaces) accessible with your credentials."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Selects a space:"})," Prompts you to select a space interactively from the fetched list."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Creates a journal page:"})," Creates a new object of type ",(0,i.jsx)(n.code,{children:"page"})," (Anytype's type key for a basic page object) with the title \"Journal \u2013 ",(0,i.jsx)(n.code,{children:"<Date>"}),'".']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Adds default content:"})," Prompts you interactively to specify custom content, or uses a detailed default template."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Sets an icon:"})," Optionally assigns a \ud83d\udcdd emoji as the page icon for easy identification."]}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Note: Make sure your Anytype app is running and you've the latest version installed. Without the Anytype app running locally, the API calls will fail with a connection error."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"fetching-your-space-id",children:"Fetching Your Space ID"}),"\n",(0,i.jsxs)(n.p,{children:["Before creating a new object, we need to know ",(0,i.jsx)(n.em,{children:"which space"})," to put it in. Every object in Anytype belongs to a space. Here, we'll use the ",(0,i.jsx)(n.code,{children:"GET /spaces"})," endpoint to fetch all spaces available to our account, then pick the first one from the result."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import requests\nimport os\nfrom datetime import datetime\nfrom dotenv import load_dotenv\n\nANYTYPE_API_BASE_URL = "http://localhost:31009"\nANYTYPE_VERSION = "2025-05-20"\n\nload_dotenv()\n\napi_key = os.getenv("ANYTYPE_API_KEY")\nif not api_key:\n    raise RuntimeError("Environment variable ANYTYPE_API_KEY is not set")\n\nheaders = {\n    "Authorization": f"Bearer {api_key}",\n    "Anytype-Version": ANYTYPE_VERSION,\n    "Content-Type": "application/json"\n}\n\ndef fetch_spaces():\n    """Fetch and return the list of spaces from the API."""\n    url = f"{ANYTYPE_API_BASE_URL}/v1/spaces"\n    resp = requests.get(url, headers=headers)\n    resp.raise_for_status()\n    data = resp.json().get("data", [])\n    if not data:\n        raise RuntimeError("No spaces found. Check your token or that Anytype is running.")\n    return data\n\ndef select_space(spaces):\n    """Prompt the user to select a space and return its ID."""\n    print("Available spaces:")\n    for idx, space in enumerate(spaces, start=1):\n        print(f"{idx}. {space[\'name\']} (ID: {space[\'id\']})")\n    try:\n        choice = int(input(f"Select a space [1-{len(spaces)}]: "))\n        selected = spaces[choice - 1]\n    except (ValueError, IndexError):\n        print("Invalid selection, defaulting to the first space.")\n        selected = spaces[0]\n    print(f"Using space: {selected[\'name\']} (ID: {selected[\'id\']})")\n    return selected[\'id\']\n'})}),"\n",(0,i.jsxs)(n.p,{children:["In the code above, we use the ",(0,i.jsx)(n.code,{children:"requests.get"})," function to call ",(0,i.jsx)(n.code,{children:"/spaces"})," with the required headers:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:"Authorization header"})," sends our API key as a Bearer token to authenticate."]}),"\n",(0,i.jsxs)(n.li,{children:["We include ",(0,i.jsx)(n.strong,{children:"Anytype-Version"})," to match the API version (in this case, ",(0,i.jsx)(n.code,{children:'"2025-05-20"'}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["On success, the response JSON contains our spaces. We take the first space's ",(0,i.jsx)(n.code,{children:"id"})," (and printed its name for confirmation)."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For real-world scripts, you might choose a specific space by filtering ",(0,i.jsx)(n.code,{children:"spaces_list"})," or by name, but here we use the first one for simplicity."]}),"\n",(0,i.jsx)(n.h2,{id:"creating-the-journal-entry-object",children:"Creating the Journal Entry Object"}),"\n",(0,i.jsxs)(n.p,{children:["Now that we have a target ",(0,i.jsx)(n.code,{children:"space_id"}),", we can create a new object in that space. We'll use the ",(0,i.jsx)(n.code,{children:"POST /spaces/{space_id}/objects"})," endpoint to create an object. We need to provide a JSON payload with at least the object's ",(0,i.jsx)(n.strong,{children:"name"})," and ",(0,i.jsx)(n.strong,{children:"type_key"}),", and we can also include the content (body) and an icon.\nIn our example, we set:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"name"})," to ",(0,i.jsx)(n.code,{children:'"Journal \u2013 <Date>"'})," (with today's date)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"type_key"})," to ",(0,i.jsx)(n.code,{children:'"ot-page"'}),", which is the type for a normal page in Anytype. (If you have a dedicated journal type or template, you could use its key or template ID here.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"body"})," to a markdown string that starts with a level-2 heading and a prompt."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"icon"})," to an emoji with format ",(0,i.jsx)(n.code,{children:"emoji"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def get_journal_details():\n    """Prompt the user for journal entry title, body, and icon."""\n    today = datetime.now().strftime("%B %d, %Y")\n    default_name = f"Journal \u2013 {today}"\n    default_body = f"""## Highlights\n- **Accomplishments**:\n    1. ...\n    2. ...\n- *Challenges*:\n    - ...\n\n## Reflection\n> "Take a moment to reflect on your day."\n\n### What Went Well\n- ...\n\n### What Could Be Improved\n- [ ] ...\n\n---\n\n## Quick Notes\n- **People I interacted with**: ...\n- **Resources/Links**: [Example](https://example.com)\n"""\n    name = input(f"Enter entry title [{default_name}]: ").strip() or default_name\n    print("Enter journal content. Press Enter on empty line to finish (leave blank to use default):")\n    lines = []\n    while True:\n        line = input()\n        if not line:\n            break\n        lines.append(line)\n    body = "\\n".join(lines) if lines else default_body\n    icon = input("Enter an emoji for the icon [\ud83d\udcdd]: ").strip() or "\ud83d\udcdd"\n    return name, body, icon\n\n# Prompt for journal details and create the entry\nname, body, icon = get_journal_details()\n\npayload = {\n    "name": name,\n    "type_key": "ot-page",\n    "body": body,\n    "icon": {"emoji": icon, "format": "emoji"}\n}\n\ncreate_url = f"{ANYTYPE_API_BASE_URL}/v1/spaces/{space_id}/objects"\ncreate_response = requests.post(create_url, headers=headers, json=payload)\ncreate_response.raise_for_status()\n\nnew_object = create_response.json().get("object", {})\nprint(f"Created object \'{new_object[\'name\']}\' (ID: {new_object[\'id\']})")\n'})}),"\n",(0,i.jsx)(n.p,{children:"Let's break down the creation step:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["We formatted today's date using Python's ",(0,i.jsx)(n.code,{children:"datetime"})," to use in the journal title and content."]}),"\n",(0,i.jsxs)(n.li,{children:["We built the ",(0,i.jsx)(n.code,{children:"new_object_payload"})," dictionary with the required fields:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"name"}),": A string for the object title."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"type_key"}),": The object type. Here we use ",(0,i.jsx)(n.code,{children:'"page"'}),". (Anytype uses keys like ",(0,i.jsx)(n.code,{children:"page"}),", ",(0,i.jsx)(n.code,{children:"note"}),", etc., for object types.)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"body"}),": The main content of the page. We provided a Markdown string with a heading and a prompt. The Anytype API supports Markdown in the body text."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"icon"}),": An optional icon for the page. We specify an emoji by giving the emoji character and setting ",(0,i.jsx)(n.code,{children:'"format": "emoji"'}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["We then used ",(0,i.jsx)(n.code,{children:"requests.post"})," to send the payload to the create object endpoint. The URL includes the ",(0,i.jsx)(n.code,{children:"first_space_id"})," we got earlier."]}),"\n",(0,i.jsx)(n.li,{children:"After a successful creation (HTTP 200), the API returns the full object data as JSON. We print out the new object's ID and name for confirmation."}),"\n"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["Tip: Instead of a static template, you could enhance this script by retrieving a journal template object from your space and using its content or template ID. The Anytype API allows specifying a ",(0,i.jsx)(n.code,{children:"template_id"})," in the payload to base the new object on an existing template."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"running-the-script",children:"Running the Script"}),"\n",(0,i.jsx)(n.p,{children:"With the code assembled above, running this script will create a new journal entry in your Anytype space. Each time you run it on a new day, it will generate a page titled with that day's date. You can customize the content template or target a specific space by adjusting the script.\nWhen you execute the script, you should see output similar to:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Using space: My Workspace (ID: bafyrei...spacid)\nCreated object 'Journal \u2013 April 16, 2025' (ID: bafybei...)\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can then open Anytype to find the newly created page (it should appear in the selected space, with the \ud83d\udcdd icon, ready for you to fill in the details of your day)."})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);